<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For My Bubi</title>
    <link href="https://fonts.googleapis.com/css2?family=Parisienne&family=Indie+Flower&family=Fredoka:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>

    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #050a10;
            font-family: 'Indie Flower', cursive;
            touch-action: none;
        }

        /* --- FIXED: YOUTUBE PLAYER STYLING --- */
        /* This keeps the player hidden so it doesn't break the GIF layout */
        #youtube-player {
            position: absolute;
            top: -9999px;
            left: -9999px;
            width: 1px;
            height: 1px;
            opacity: 0;
            z-index: -1;
            pointer-events: none;
        }

        /* =========================================
           PHASE 1: DUDU STORY PAGES
           ========================================= */
        #landing-page {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            background: linear-gradient(135deg, #fff1eb 0%, #ace0f9 100%);
            z-index: 100;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 1.5s ease-in-out;
        }

        .cute-container {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            text-align: center;
            max-width: 85%;
            width: 350px;
            border: 3px solid #ffb7b2;
            position: relative;
            transition: transform 0.3s ease;
        }

        .dudu-gif {
            width: 100%;
            height: 200px;
            object-fit: contain;
            border-radius: 15px;
            margin-bottom: 20px;
            background-color: #fff0f5; 
        }

        .story-text {
            font-family: 'Fredoka', sans-serif;
            color: #555;
            font-size: 1.3rem;
            margin-bottom: 25px;
            min-height: 80px; 
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.4;
            font-weight: 600;
        }

        .btn-group {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            position: relative; 
            min-height: 50px;
            width: 100%;
        }

        .main-btn {
            background: #ff6b6b;
            color: white;
            padding: 10px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-family: 'Fredoka', sans-serif;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(255, 107, 107, 0.3);
            transition: transform 0.2s;
            white-space: nowrap;
            z-index: 10;
        }

        .main-btn:active { transform: scale(0.95); }

        #no-btn {
            background: #a0aec0;
            color: white;
            cursor: pointer;
            padding: 10px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-family: 'Fredoka', sans-serif;
            border: none;
            box-shadow: 0 4px 10px rgba(160, 174, 192, 0.3);
            transition: 0.1s ease; 
        }

        .fade-out { opacity: 0; transition: opacity 0.5s; }

        /* =========================================
           PHASE 2: ANNIVERSARY DESK
           ========================================= */
        #desk-container {
            opacity: 0;
            pointer-events: none;
            transition: opacity 2s ease-in-out;
            width: 100%; height: 100%;
        }

        #intro-layer {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background-color: #050a10; z-index: 50;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 2s ease-in-out; pointer-events: none;
        }

        #main-world {
            opacity: 0; transition: opacity 3s ease-in-out;
            position: relative; z-index: 1; width: 100%; height: 100%;
        }

        #desk-canvas { position: absolute; top: 0; left: 0; z-index: 0; }
        #ui-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; pointer-events: none; }

        .intro-text-line {
            font-family: 'Parisienne', cursive; color: #ffdb70; font-weight: 300; text-align: center;
            opacity: 0; transform: translateY(30px); filter: blur(10px);
            text-shadow: 0 0 15px rgba(255, 219, 112, 0.4); margin: 0 20px;
            font-size: 2.5rem; line-height: 1.4; letter-spacing: 2px; position: relative; z-index: 2;
        }
        @media (min-width: 768px) { .intro-text-line { font-size: 5rem; line-height: 1.8; letter-spacing: 4px; } }

        .reveal-active { animation: cinematic-reveal 3s cubic-bezier(0.25, 1, 0.5, 1) forwards, gentle-pulse 3s infinite alternate ease-in-out 3s; }
        @keyframes cinematic-reveal { 0% { opacity: 0; transform: translateY(40px) scale(0.95); filter: blur(12px); } 100% { opacity: 1; transform: translateY(0) scale(1); filter: blur(0); } }
        @keyframes gentle-pulse { 0% { text-shadow: 0 0 15px rgba(255, 219, 112, 0.4); transform: scale(1); } 100% { text-shadow: 0 0 25px rgba(255, 219, 112, 0.7), 0 0 5px rgba(255, 255, 255, 0.5); transform: scale(1.02); } }

        .light-string { position: absolute; top: -10px; left: 0; width: 100%; height: 60px; display: flex; justify-content: space-around; z-index: 1; pointer-events: none; }
        .bulb { width: 14px; height: 14px; background: #ffdb70; border-radius: 50%; margin-top: 15px; z-index: 2; box-shadow: 0px 5px 20px 5px rgba(255, 220, 100, 0.4); animation: twinkle 4s infinite alternate ease-in-out; }
        .bulb:nth-child(2n) { animation-duration: 5s; background: #ffeebb; }
        .bulb:nth-child(3n) { animation-duration: 6s; background: #ffd700; }
        @keyframes twinkle { 0% { opacity: 0.6; transform: scale(0.9); } 100% { opacity: 1; transform: scale(1.1); } }

        .desk-surface { width: 100vw; height: 100vh; position: relative; z-index: 5; }
        .polaroid {
            position: absolute; cursor: grab; perspective: 1000px; touch-action: none; user-select: none; 
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            will-change: transform; transform: translateZ(0); -webkit-backface-visibility: hidden; backface-visibility: hidden;
            width: 150px; height: 190px;
        }
        .polaroid.is-dragging { transition: none !important; cursor: grabbing; z-index: 9999 !important; scale: 1.05; }
        @media (min-width: 768px) { .polaroid { width: 240px; height: 290px; } }
        
        .polaroid-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); transform-style: preserve-3d; box-shadow: 0 15px 35px rgba(0,0,0,0.6); background: #fdfdfd; border-radius: 4px; }
        .polaroid.flipped .polaroid-inner { transform: rotateY(180deg); }
        .front, .back { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; border-radius: 4px; background: #fdfdfd; }
        .front { padding: 10px 10px 40px 10px; display: flex; flex-direction: column; align-items: center; }
        .photo-frame { width: 100%; height: 75%; background-color: #222; overflow: hidden; border: 1px solid #ddd; }
        .photo-frame img { width: 100%; height: 100%; object-fit: cover; pointer-events: none; opacity: 0.9; }
        .caption { margin-top: 10px; font-size: 1.2rem; color: #444; font-weight: bold; }
        .back { transform: rotateY(180deg); background: #fffef0; padding: 15px; display: flex; justify-content: center; align-items: center; background-image: repeating-linear-gradient(#fffef0 0px, #fffef0 24px, #91d1d3 25px); background-size: 100% 25px; }
        .note { font-size: 1.1rem; line-height: 22px; color: #1a1a40; font-family: 'Indie Flower', cursive; transform: rotate(-1deg); background: rgba(255,255,255,0.8); padding: 5px; box-shadow: 1px 1px 5px rgba(0,0,0,0.1); }
        @media (min-width: 768px) { .front { padding: 12px 12px 50px 12px; } .photo-frame { height: 220px; } .caption { margin-top: 15px; font-size: 1.5rem; } .note { font-size: 1.4rem; padding: 10px; } }

        .hud { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); pointer-events: auto; background: rgba(0, 0, 0, 0.4); backdrop-filter: blur(5px); padding: 8px 20px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.1); color: rgba(255,255,255,0.8); display: flex; gap: 15px; align-items: center; font-size: 0.9rem; white-space: nowrap; }
        @media (min-width: 768px) { .hud { right: 20px; left: auto; transform: none; bottom: 20px; } }
        .btn { cursor: pointer; transition: color 0.2s; } .btn:hover { color: white; }
    </style>
</head>
<body>

    <div id="youtube-player"></div>

    <div id="landing-page">
        <div class="cute-container">
            <img id="dudu-img" src="/gif/1.gif" alt="Cute Bear" class="dudu-gif">
            
            <div id="story-text" class="story-text">
                Hello my love! <br>this is John ur most handsome boyfie
            </div>

            <div class="btn-group" id="btn-group">
                <button class="main-btn" onclick="nextPage()">Next</button>
            </div>
        </div>
    </div>

    <div id="desk-container">
        <div id="intro-layer">
            <div id="intro-text" class="intro-text-line">Happy 3rd Anniversary bub, i love you</div>
        </div>

        <div id="main-world">
            <canvas id="desk-canvas"></canvas>

            <div class="light-string">
                <div class="bulb"></div><div class="bulb"></div><div class="bulb"></div><div class="bulb"></div>
                <div class="bulb"></div><div class="bulb"></div><div class="bulb"></div><div class="bulb"></div>
            </div>

            <div class="desk-surface" id="desk">
                <div class="polaroid" data-x="0" data-y="0" style="top: 10%; left: 5%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="photo/day1.jfif" alt="Memory"></div>
                            <div class="caption">Day One</div>
                        </div>
                        <div class="back"><p class="note">Everything started here. I knew it was special. The day you've trust me ur hands</p></div>
                    </div>
                </div>

                <div class="polaroid" data-x="0" data-y="0" style="top: 50%; left: 60%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="photo/randomfun.jfif" alt="Memory"></div>
                            <div class="caption">Random kulitan</div>
                        </div>
                        <div class="back"><p class="note"> best kulitan, 711 moments with chocolates </p></div>
                    </div>
                </div>

                <div class="polaroid" data-x="0" data-y="0" style="top: 15%; left: 70%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/1stFireworkds.jfif" alt="Memory"></div>
                            <div class="caption">Our 1st concert</div>
                        </div>
                        <div class="back"><p class="note">Things here didnt go smoothly we had misunderstandings and we still work it out, fave picture too</p></div>
                    </div>
                </div>

                <div class="polaroid" data-x="0" data-y="0" style="top: 35%; left: 10%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/1st new year.jfif" alt="Memory"></div>
                            <div class="caption">1st New year together</div>
                        </div>
                        <div class="back"><p class="note">This was the first year that we're together, ur somehow sad because im not able to celeb the end of year in ur place but still had so much fun</p></div>
                    </div>
                </div>

                <div class="polaroid" data-x="0" data-y="0" style="top: 55%; left: 25%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/1stAnnivv.jfif" alt="Memory"></div>
                            <div class="caption"> 1st Anniversary</div>
                        </div>
                        <div class="back"><p class="note">Our first sacred celebrated anniversary, nag away pa tayo because u mock my outfit i got sad and that's the root cause why im so grumpy, but anyways we've enjoyed the rest of the celebration</p></div>
                    </div>
                </div>

                <div class="polaroid" data-x="0" data-y="0" style="top: 5%; left: 35%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/2ndAnnivNotOfficial.jfif" alt="Memory"></div>
                            <div class="caption"> 2ndANNIVPERYA</div>
                        </div>
                        <div class="back"><p class="note">I know this one is our 2nd anniversary but since we're both busy we celebrated it in peryahan, we still had much fun and moments</p></div>
                    </div>
                </div>
                
                <div class="polaroid" data-x="0" data-y="0" style="top: 25%; left: 80%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/2ndAnnivOfficial.jpg" alt="Memory"></div>
                            <div class="caption">2ndANNIV </div>
                        </div>
                        <div class="back"><p class="note">Our real celebration of 2nd Anniverysary, my favorite part is we had some fun in timezone my first ever experience ofcrs with u</p></div>
                    </div>
                </div>
                
                <div class="polaroid" data-x="0" data-y="0" style="top: 60%; left: 5%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/2ndbday042503.jfif" alt="Memory"></div>
                            <div class="caption">04/25/03 SAMG</div>
                        </div>
                        <div class="back"><p class="note">2nd celebration of ur bday na kasama ako, nag samg tayo kasama mga kapatid mo, ako chef niyo hehe</p></div>
                    </div>
                </div>
                
                <div class="polaroid" data-x="0" data-y="0" style="top: 30%; left: 50%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/2ndbday062904.jfif" alt="Memory"></div>
                            <div class="caption">06/29/04</div>
                        </div>
                        <div class="back"><p class="note">Here's the very special day we had a connection after a quarrel, and also sarap ng ramen and we've watched a silent place movie on cinemas also 2nd time u've made my bday feel so special</p></div>
                    </div>
                </div>

                <div class="polaroid" data-x="0" data-y="0" style="top: 10%; left: 85%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/711.jfif" alt="Memory"></div>
                            <div class="caption">Coffee flavored soy</div>
                        </div>
                        <div class="back"><p class="note">So much kilig ako sa oras na yan haha, i've met ur friends as well along with my friends too, and nilibre mo pa ako ng fav drinks ko na akala ko galing kay janjan, sobrang saya ko nung nalaman ko bili mo pala yon</p></div>
                    </div>
                </div>

                <div class="polaroid" data-x="0" data-y="0" style="top: 40%; left: 20%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/aesthetic.jfif" alt="Memory"></div>
                            <div class="caption">Random picture</div>
                        </div>
                        <div class="back"><p class="note">A random picture we've made and yet feels like a home</p></div>
                    </div>
                </div>

                <div class="polaroid" data-x="0" data-y="0" style="top: 5%; left: 55%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/all fun.jfif" alt="Memory"></div>
                            <div class="caption">Bond</div>
                        </div>
                        <div class="back"><p class="note">I tried to make some bond with ur peeps and alam ko bahay nila jhemil to, hwhaha after we hangout on ur place we end up having landian on their place</p></div>
                    </div>
                </div>

                <div class="polaroid" data-x="0" data-y="0" style="top: 55%; left: 45%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/antipolo.jfif" alt="Memory"></div>
                            <div class="caption">Antipolo</div>
                        </div>
                        <div class="back"><p class="note">Ayuda na pinagsimulan ng lahat, puro tayo pila pila and this was the first time i land a step on antipolo, without you i am just a boy scrolling on his phone all day</p></div>
                    </div>
                </div>

                <div class="polaroid" data-x="0" data-y="0" style="top: 20%; left: 15%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/awaybatisajollibee.jfif" alt="Memory"></div>
                            <div class="caption">Jollibee</div>
                        </div>
                        <div class="back"><p class="note">Nag-away tayo nyan then nagbati rin tayo sa jollibee bwhaha iloveyou bubi</p></div>
                    </div>
                </div>

                <div class="polaroid" data-x="0" data-y="0" style="top: 45%; left: 80%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/bbtime sa ibang bahay.jfif" alt="Memory"></div>
                            <div class="caption">Take oppurtunity</div>
                        </div>
                        <div class="back"><p class="note">Sa bahay pa ng kaklase mo tayo nag lalandian basta lang magbebetime bwahahahha</p></div>
                    </div>
                </div>

                <div class="polaroid" data-x="0" data-y="0" style="top: 15%; left: 30%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/bday042503.jfif" alt="Memory"></div>
                            <div class="caption">Ur first bday</div>
                        </div>
                        <div class="back"><p class="note">Our official first date as well, sobrang saya even tho sa sm san mateo lang siya, busog na busog tayo pag-uwi, also we bought couple rings there</p></div>
                    </div>
                </div>

                <div class="polaroid" data-x="0" data-y="0" style="top: 55%; left: 75%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/bday062904.jfif" alt="Memory"></div>
                            <div class="caption">My bday celebration</div>
                        </div>
                        <div class="back"><p class="note">i know this was the 2nd time we've celebrated my bday kumain lang tayo sa kfc and you let me taste their chicken burger since alam mo na masarap doon and u know fave ko is burger hehe</p></div>
                    </div>
                </div>

                <div class="polaroid" data-x="0" data-y="0" style="top: 35%; left: 65%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/burger.jfif" alt="Memory"></div>
                            <div class="caption">BURGER</div>
                        </div>
                        <div class="back"><p class="note">Favorite date ideas and tipid date, bibili lang tayo ng burger sa kapitbahay then tatambay sa overview the best feeling din</p></div>
                    </div>
                </div>

                <div class="polaroid" data-x="0" data-y="0" style="top: 5%; left: 20%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/december feels.jfif" alt="Memory"></div>
                            <div class="caption">December Picture</div>
                        </div>
                        <div class="back"><p class="note">A random picture of us on december</p></div>
                    </div>
                </div>
            

                <div class="polaroid" data-x="0" data-y="0" style="top: 50%; left: 35%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/dswd.jfif" alt="Memory"></div>
                            <div class="caption">DSWD 4K AYUDA</div>
                        </div>
                        <div class="back"><p class="note">The best day na ginawa nating dating place buong munisipyo sa pagpila at pagpasa ng requirements, best day and di makakalimutan na harutan at tawanan</p></div>
                    </div>
                </div>
            

                <div class="polaroid" data-x="0" data-y="0" style="top: 25%; left: 5%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/febpic.jfif" alt="Memory"></div>
                            <div class="caption">FEB 14</div>
                        </div>
                        <div class="back"><p class="note">FebIbig, valentines day and as far as i know first valentines natin yan na magkasama, we just dated outside hehe</p></div>
                    </div>
                </div>
       

                <div class="polaroid" data-x="0" data-y="0" style="top: 40%; left: 50%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/filmbuhaynirizal.jfif" alt="Memory"></div>
                            <div class="caption">Buhay Ni Rizal</div>
                        </div>
                        <div class="back"><p class="note">So tiring yung araw na 'to, napunta tayo kung saan-saan para magtake ng film for ur project big thanks sayo dahil nakabili ako ng keyb ko, and i had so much fun as well alam ko nag enjoy ka rin kasi naligo kayo ng wawa niyan</p></div>
                    </div>
                </div>
            

                <div class="polaroid" data-x="0" data-y="0" style="top: 15%; left: 50%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/first ring.jfif" alt="Memory"></div>
                            <div class="caption">First Ring</div>
                        </div>
                        <div class="back"><p class="note">We bought it online and sobrang ganda sa pakiramdam na meron tayong sentimental items na sobrang halaga sating dalawa until now</p></div>
                    </div>
                </div>
     

                <div class="polaroid" data-x="0" data-y="0" style="top: 55%; left: 10%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/funhouse.jfif" alt="Memory"></div>
                            <div class="caption">Fun house</div>
                        </div>
                        <div class="back"><p class="note">Dated at funhouse kasama mga kaklase mo, i cherished these memories na nabuild natin naglaro pa tayo ng bball dito mwehehe</p></div>
                    </div>
                </div>
        

                <div class="polaroid" data-x="0" data-y="0" style="top: 25%; left: 40%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/heartface.jfif" alt="Memory"></div>
                            <div class="caption">Heart</div>
                        </div>
                        <div class="back"><p class="note">Just a random day that we've created a new memory by making this funny heart on our cheeks hehe</p></div>
                    </div>
                </div>
            

                <div class="polaroid" data-x="0" data-y="0" style="top: 60%; left: 60%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/hotpot.jfif" alt="Memory"></div>
                            <div class="caption">HotPot</div>
                        </div>
                        <div class="back"><p class="note">The time that we are financially free, kidding, may work pa kasi tayo and sobrang sarap ng hotpot na yan first time ko rin yan bhehe</p></div>
                    </div>
                </div>
            

                <div class="polaroid" data-x="0" data-y="0" style="top: 10%; left: 65%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/jogging.jfif" alt="Memory"></div>
                            <div class="caption">Jogging 1</div>
                        </div>
                        <div class="back"><p class="note">Para-paraan talaga tayo niyan we always set a jogging para magkita and para magbebetime hehe</p></div>
                    </div>
                </div>
            

                <div class="polaroid" data-x="0" data-y="0" style="top: 35%; left: 90%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/joggingsa711.jfif" alt="Memory"></div>
                            <div class="caption">Jogging 711</div>
                        </div>
                        <div class="back"><p class="note">Just a normal day to us and rekta 711</p></div>
                    </div>
                </div>
            

                <div class="polaroid" data-x="0" data-y="0" style="top: 50%; left: 90%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/kiyo.jpg" alt="Memory"></div>
                            <div class="caption">Kiyo</div>
                        </div>
                        <div class="back"><p class="note">Kiyo concert na medyo tagilid ulit cus we had some misunderstandings as well, but all goods na enjoy natin yung mga kanta ni kiyo</p></div>
                    </div>
                </div>
            

                <div class="polaroid" data-x="0" data-y="0" style="top: 20%; left: 25%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/kny.jfif" alt="Memory"></div>
                            <div class="caption">Kimetsu no yaiba</div>
                        </div>
                        <div class="back"><p class="note">BEST MOVIE and ofcrs with BEST PERSON</p></div>
                    </div>
                </div>
            

                <div class="polaroid" data-x="0" data-y="0" style="top: 45%; left: 40%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/kny2.jfif" alt="Memory"></div>
                            <div class="caption">Kimetsu no yaiba 2</div>
                        </div>
                        <div class="back"><p class="note">Away ulit at bati pero sobrang ganda ng movie huhu</p></div>
                    </div>
                </div>
            

                <div class="polaroid" data-x="0" data-y="0" style="top: 5%; left: 80%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/marikina.jfif" alt="Memory"></div>
                            <div class="caption">RIVERBANKS</div>
                        </div>
                        <div class="back"><p class="note">Our date na nagpunta tayo marikina riverbanks and after that we hangout sa overview</p></div>
                    </div>
                </div>
           

                <div class="polaroid" data-x="0" data-y="0" style="top: 30%; left: 75%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/mh hangout.jfif" alt="Memory"></div>
                            <div class="caption">Manila hills</div>
                        </div>
                        <div class="back"><p class="note"></p></div>
                    </div>
                </div>
            

                <div class="polaroid" data-x="0" data-y="0" style="top: 60%; left: 30%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/mhthings.jfif" alt="Memory"></div>
                            <div class="caption">Manila hills 2</div>
                        </div>
                        <div class="back"><p class="note">Our fave place before, sobrang ganda ng city lights with a nonsense deep talk but it has a sense in life with u</p></div>
                    </div>
                 </div>


                 <div class="polaroid" data-x="0" data-y="0" style="top: 15%; left: 85%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/MOA.jfif" alt="Memory"></div>
                            <div class="caption">MOA</div>
                        </div>
                        <div class="back"><p class="note">Our first gala kasama ang fam ko, solid din dito sa moa nag enjoy ako pero nag-away tayo bandang dulo</p></div>
                    </div>
                 </div>

                 <div class="polaroid" data-x="0" data-y="0" style="top: 35%; left: 45%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/picatschool.jfif" alt="Memory"></div>
                            <div class="caption">SCHOOL ENCOUNTER</div>
                        </div>
                        <div class="back"><p class="note">Our picture na puro bulyaw ng kaibigan, pero gustong gusto ko talaga din hehe</p></div>
                    </div>
                 </div>

                 <div class="polaroid" data-x="0" data-y="0" style="top: 5%; left: 45%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/polaroid.jfif" alt="Memory"></div>
                            <div class="caption">POLAROID</div>
                        </div>
                        <div class="back"><p class="note">Our first photoshoped picture at sm sanmateo, fave na fave ko pic na 'to</p></div>
                    </div>
                 </div>

                 <div class="polaroid" data-x="0" data-y="0" style="top: 45%; left: 5%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/polaroid2.jfif" alt="Memory"></div>
                            <div class="caption">POLAROID 2</div>
                        </div>
                        <div class="back"><p class="note">We missed to get some picture, same place, same studio, same person</p></div>
                    </div>
                 </div>

                <div class="polaroid" data-x="0" data-y="0" style="top: 20%; left: 55%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/smileeee.jfif" alt="Memory"></div>
                            <div class="caption">SMILE</div>
                        </div>
                        <div class="back"><p class="note">U complain about me being look serious in our pictures hehe, then i made tease u with a wide smile, u look annoyed HAHAHA cute</p></div>
                    </div>
                 </div>

                <div class="polaroid" data-x="0" data-y="0" style="top: 55%; left: 85%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/swimmingg.jfif" alt="Memory"></div>
                            <div class="caption">SWIMMING</div>
                        </div>
                        <div class="back"><p class="note">Night swimming with ur peeps</p></div>
                    </div>
                 </div>

                <div class="polaroid" data-x="0" data-y="0" style="top: 30%; left: 20%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/students.jfif" alt="Memory"></div>
                            <div class="caption">STUDENTS</div>
                        </div>
                        <div class="back"><p class="note">Most behave student</p></div>
                    </div>
                 </div>

                <div class="polaroid" data-x="0" data-y="0" style="top: 10%; left: 40%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/sundo.jfif" alt="Memory"></div>
                            <div class="caption">SUNDO</div>
                        </div>
                        <div class="back"><p class="note">After ur school sinundo kita para magdate hehe</p></div>
                    </div>
                 </div>

                 <div class="polaroid" data-x="0" data-y="0" style="top: 50%; left: 20%;">
                    <div class="polaroid-inner">
                        <div class="front">
                            <div class="photo-frame"><img src="/photo/urhappypill.jfif" alt="Memory"></div>
                            <div class="caption">UR HAPPY PILL</div>
                        </div>
                        <div class="back"><p class="note">HOPE THIS MADE U SMILE I LOVE YOU:></p></div>
                    </div>
                 </div>
            </div>

            

            <div id="ui-layer">
                <div class="hud">
                    <span class="btn" onclick="resetDesk()">â†º Scatter Photos</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        /* =======================
           YOUTUBE PLAYER LOGIC
        ======================== */
        var player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('youtube-player', {
                height: '0',
                width: '0',
                videoId: 'RGhdswQUGkU', // Updated Song
                playerVars: {
                    'autoplay': 0,
                    'controls': 0,
                    'loop': 1,
                    'playlist': 'RGhdswQUGkU',
                    'playsinline': 1,

                }
            });
        }

        /* =======================
           PHASE 1: STORY LOGIC
        ======================== */
        let currentPage = 0;

        const pages = [
            {
                text: "Hello my love! <br>this is John ur most handsome boyfie",
                gif: "/gif/1.gif",
                btn: "Next"
            },
            {
                text: "Do you love me? dont you dare click no bubi hehe",
                gif: "/gif/2.gif",
                btn: "Yes",
                hasNoBtn: true
            },
            {
                text: "Time flies so fast, yet ur still my fav one and will still be in the future",
                gif: "/gif/3.gif",
                btn: "Next"
            },
            {
                text: "THANK YOU SO MUCH FOR BEING BY MY SIDE ALWAYS",
                gif: "/gif/4.gif",
                btn: "Next"
            },
            {
                text: "I will be forever thankful for we have met and for the unconditional love u've gave",
                gif: "/gif/5.gif",
                btn: "Next"
            },
            {
                text: "I LOVE YOU SO MUCH BUBI - JC",
                gif: "/gif/5.gif",
                btn: "Ready for Surprise?"
            }
        ];

        function nextPage() {
            currentPage++;

            if (currentPage >= pages.length) {
                // FIXED: Explicitly Play & Unmute on click to fix mobile audio
                if(player && typeof player.playVideo === 'function') {
                    player.unMute();
                    player.playVideo();
                }
                
                goToDesk();
                return;
            }

            const textEl = document.getElementById('story-text');
            const imgEl = document.getElementById('dudu-img');
            const btnGroup = document.getElementById('btn-group');

            textEl.classList.add('fade-out');
            
            setTimeout(() => {
                const data = pages[currentPage];
                
                textEl.innerHTML = data.text;
                imgEl.src = data.gif;
                
                let btnHtml = ``;
                
                if (data.hasNoBtn) {
                    btnHtml += `<button id="no-btn" onmouseover="moveButton()" onclick="moveButton()">No</button>`;
                }

                btnHtml += `<button class="main-btn" onclick="nextPage()">${data.btn}</button>`;
                
                btnGroup.innerHTML = btnHtml;
                textEl.classList.remove('fade-out');
            }, 300);
        }

        function moveButton() {
            const btn = document.getElementById('no-btn');
            if (!btn) return;
            btn.style.position = 'fixed';
            const newX = Math.random() * (window.innerWidth - 100);
            const newY = Math.random() * (window.innerHeight - 50);
            btn.style.left = newX + 'px';
            btn.style.top = newY + 'px';
        }

        function goToDesk() {
            const landing = document.getElementById('landing-page');
            const deskContainer = document.getElementById('desk-container');

            landing.style.opacity = '0';
            setTimeout(() => {
                landing.style.display = 'none';
                deskContainer.style.opacity = '1';
                deskContainer.style.pointerEvents = 'auto';
                startDeskSequence();
            }, 1500);
        }

        /* =======================
           PHASE 2: DESK LOGIC
        ======================== */
        const canvas = document.getElementById('desk-canvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        let particles = [];
        let tulips = [];
        let shootingStars = [];
        let gameActive = false;

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            if(gameActive) initTulips(); 
        }
        window.addEventListener('resize', resize);
        
        class Tulip {
            constructor() {
                this.x = Math.random() * width;
                this.maxHeight = Math.random() * 50 + 70; 
                this.growth = 0; this.bloom = 0; 
                this.swaySpeed = Math.random() * 0.002 + 0.001;
                this.swayOffset = Math.random() * Math.PI * 2;
                this.flowerHue = 320 + Math.random() * 30; this.leafHue = 120 + Math.random() * 20; 
            }
            update(time) {
                if (!gameActive) return;
                if (this.growth < 1) this.growth += 0.005;
                if (this.growth > 0.6 && this.bloom < 1) this.bloom += 0.003; 
            }
            draw(time) {
                if (this.growth <= 0) return;
                const sway = Math.sin(time * this.swaySpeed + this.swayOffset) * (8 * this.growth);
                const currentH = this.maxHeight * this.growth; const headX = this.x + sway; const headY = height - currentH;
                ctx.shadowBlur = 15; ctx.shadowColor = `hsl(${this.flowerHue}, 80%, 60%)`;
                if (this.growth > 0.3) {
                    ctx.fillStyle = `hsla(${this.leafHue}, 60%, 35%, 0.8)`;
                    ctx.beginPath(); ctx.moveTo(this.x, height); ctx.quadraticCurveTo(this.x - 15, height - currentH * 0.5, this.x - 5, height - currentH * 0.3); ctx.quadraticCurveTo(this.x - 5, height - currentH * 0.1, this.x, height); ctx.fill();
                    ctx.beginPath(); ctx.moveTo(this.x, height); ctx.quadraticCurveTo(this.x + 15, height - currentH * 0.6, this.x + 5, height - currentH * 0.4); ctx.quadraticCurveTo(this.x + 5, height - currentH * 0.1, this.x, height); ctx.fill();
                }
                ctx.beginPath(); ctx.moveTo(this.x, height); ctx.quadraticCurveTo(this.x + sway / 2, height - currentH / 2, headX, headY);
                const stemGrad = ctx.createLinearGradient(this.x, height, headX, headY);
                stemGrad.addColorStop(0, '#0f2e0f'); stemGrad.addColorStop(1, `hsl(${this.leafHue}, 60%, 60%)`);
                ctx.strokeStyle = stemGrad; ctx.lineWidth = 3; ctx.stroke();
                if (this.bloom > 0) {
                    ctx.shadowBlur = 20; const size = 18 * this.bloom;
                    ctx.fillStyle = `hsla(${this.flowerHue}, 70%, 30%, 0.8)`; ctx.beginPath(); ctx.ellipse(headX, headY - size * 0.8, size * 0.6, size * 0.9, 0, 0, Math.PI * 2); ctx.fill();
                    const pGrad = ctx.createRadialGradient(headX - size/2, headY - size/2, 0, headX, headY, size * 2);
                    pGrad.addColorStop(0, `hsla(${this.flowerHue}, 90%, 85%, 0.95)`); pGrad.addColorStop(1, `hsla(${this.flowerHue}, 80%, 45%, 0.7)`); 
                    ctx.fillStyle = pGrad;
                    ctx.beginPath(); ctx.moveTo(headX, headY); ctx.bezierCurveTo(headX - size * 1.2, headY - size * 0.5, headX - size * 0.5, headY - size * 1.5, headX, headY - size * 1.2); ctx.bezierCurveTo(headX, headY - size * 0.5, headX, headY, headX, headY); ctx.fill();
                    ctx.beginPath(); ctx.moveTo(headX, headY); ctx.bezierCurveTo(headX + size * 1.2, headY - size * 0.5, headX + size * 0.5, headY - size * 1.5, headX, headY - size * 1.2); ctx.bezierCurveTo(headX, headY - size * 0.5, headX, headY, headX, headY); ctx.fill();
                    ctx.shadowColor = '#ffff00'; ctx.shadowBlur = 30; ctx.fillStyle = 'rgba(255, 255, 200, 0.9)'; ctx.beginPath(); ctx.ellipse(headX, headY - size * 0.5, size * 0.2, size * 0.4, 0, 0, Math.PI * 2); ctx.fill();
                }
                ctx.shadowBlur = 0; 
            }
        }

        class Particle {
            constructor() { this.reset(); }
            reset() {
                this.x = Math.random() * width; this.y = Math.random() * height;
                this.vx = (Math.random() - 0.5) * 0.2; this.vy = (Math.random() - 0.5) * 0.2;
                this.size = Math.random() * 2 + 0.5; this.alpha = Math.random() * 0.5;
                this.flashSpeed = Math.random() * 0.05 + 0.01; this.flashOffset = Math.random() * 100;
                this.hue = Math.random() > 0.5 ? 330 : 45; 
            }
            update(time) {
                this.x += this.vx; this.y += this.vy;
                if (this.x < 0) this.x = width; if (this.x > width) this.x = 0;
                if (this.y < 0) this.y = height; if (this.y > height) this.y = 0;
                this.alpha = 0.3 + Math.abs(Math.sin((time * this.flashSpeed) + this.flashOffset)) * 0.4;
            }
            draw() {
                ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = `hsla(${this.hue}, 80%, 70%, ${this.alpha})`;
                ctx.fill(); 
            }
        }
        class ShootingStar {
            constructor() { this.reset(); }
            reset() {
                this.x = Math.random() * width; this.y = Math.random() * height * 0.5;
                this.len = Math.random() * 80 + 10; this.speed = Math.random() * 10 + 6;
                this.size = Math.random() * 1 + 0.1;
                this.waitTime = new Date().getTime() + Math.random() * 3000 + 1000;
                this.active = false;
            }
            update() {
                if(this.active){
                    this.x -= this.speed; this.y += this.speed;
                    if(this.x < 0 || this.y > height){ this.active = false; this.waitTime = new Date().getTime() + Math.random() * 10000; }
                } else {
                    if(new Date().getTime() > this.waitTime){ this.active = true; this.x = Math.random() * width + 200; this.y = Math.random() * height * 0.2; }
                }
            }
            draw() {
                if(this.active){
                    ctx.strokeStyle = 'rgba(255, 200, 200, 0.5)'; ctx.lineWidth = this.size;
                    ctx.beginPath(); ctx.moveTo(this.x, this.y); ctx.lineTo(this.x + this.len, this.y - this.len); ctx.stroke();
                }
            }
        }

        function initTulips() {
            tulips = []; particles = []; shootingStars = [];
            const count = Math.floor(width / 25); 
            for(let i = 0; i < count; i++) { if(Math.random() > 0.1) tulips.push(new Tulip()); }
            for(let i = 0; i < 80; i++) particles.push(new Particle());
            shootingStars.push(new ShootingStar()); shootingStars.push(new ShootingStar());
        }

        let time = 0;
        function animate() {
            time++;
            const gradient = ctx.createLinearGradient(0, 0, 0, height);
            gradient.addColorStop(0, '#050a10'); gradient.addColorStop(1, '#0f1a25');   
            ctx.fillStyle = gradient; ctx.fillRect(0, 0, width, height);
            shootingStars.forEach(s => { s.update(); s.draw(); });
            particles.forEach(p => { p.update(time); p.draw(); });
            tulips.forEach(t => { t.update(time); t.draw(time); });
            requestAnimationFrame(animate);
        }

        function startDeskSequence() {
            resize();
            animate();
            setTimeout(() => { document.getElementById('intro-text').classList.add('reveal-active'); }, 500);
            setTimeout(() => {
                const intro = document.getElementById('intro-layer');
                const main = document.getElementById('main-world');
                intro.style.opacity = '0';
                setTimeout(() => { 
                    intro.style.display = 'none'; 
                    main.style.opacity = '1'; 
                    gameActive = true; 
                    initTulips(); 
                }, 2000); 
            }, 6000); 
        }

        /* --- INTERACT JS --- */
        let zIndexCounter = 100; 

        const items = document.querySelectorAll('.polaroid');
        items.forEach(item => {
            const rot = Math.random() * 20 - 10;
            item.style.transform = `translate(0px, 0px) rotate(${rot}deg)`;
            item.dataset.rot = rot;
            item.setAttribute('data-is-straight', 'false');
        });

        interact('.polaroid').draggable({
            inertia: true, 
            modifiers: [ interact.modifiers.restrictRect({ restriction: 'body', endOnly: true }) ],
            autoScroll: true,
            listeners: { 
                start: function(event) {
                    zIndexCounter++;
                    event.target.style.zIndex = zIndexCounter;
                    event.target.classList.add('is-dragging');
                },
                move: dragMoveListener,
                end: function(event) {
                    const target = event.target;
                    target.classList.remove('is-dragging');
                    const x = (parseFloat(target.getAttribute('data-x')) || 0);
                    const y = (parseFloat(target.getAttribute('data-y')) || 0);
                    const originalRot = target.dataset.rot || 0;
                    const isStraight = target.getAttribute('data-is-straight') === 'true';
                    const finalRot = isStraight ? 0 : originalRot;
                    target.style.transform = `translate(${x}px, ${y}px) rotate(${finalRot}deg)`;
                }
            }
        }).on('tap', function(event){
            if(!event.interaction.pointerIsDown) return; 
            const target = event.currentTarget;
            zIndexCounter++;
            target.style.zIndex = zIndexCounter;
            
            const x = (parseFloat(target.getAttribute('data-x')) || 0);
            const y = (parseFloat(target.getAttribute('data-y')) || 0);
            const originalRot = target.dataset.rot || 0;
            const isStraight = target.getAttribute('data-is-straight') === 'true';

            if (isStraight) {
                target.style.transform = `translate(${x}px, ${y}px) rotate(${originalRot}deg)`;
                target.setAttribute('data-is-straight', 'false');
            } else {
                target.style.transform = `translate(${x}px, ${y}px) rotate(0deg)`;
                target.setAttribute('data-is-straight', 'true');
            }
            target.classList.toggle('flipped');
        });

        function dragMoveListener (event) {
            var target = event.target;
            var x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx;
            var y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;
            target.style.transform = 'translate(' + x + 'px, ' + y + 'px) rotate(0deg)';
            target.setAttribute('data-x', x); 
            target.setAttribute('data-y', y);
        }

        function resetDesk() {
            items.forEach(item => {
                const rot = item.dataset.rot || 0;
                item.style.transform = `translate(0px, 0px) rotate(${rot}deg)`;
                item.setAttribute('data-x', 0); item.setAttribute('data-y', 0);
                item.classList.remove('flipped');
                item.setAttribute('data-is-straight', 'false');
                item.style.zIndex = 1;
            });
        }
    </script>
</body>
</html>
